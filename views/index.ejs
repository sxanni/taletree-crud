<%- include('partials/header.ejs') %>

  <body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"></script>
    <nav class="mx-auto d-flex flex-row justify-content-between align-items-center mb-5 bg-success">
      <div class="d-flex flex-row justify-content-center>

        <a href="/">
          <img src="./assets/logo.png" alt="logo" class="logo p-4">
          <!-- <img src="<%=imgsrc%>" alt="Logo" class="logo p-4"> -->
        </a>
        <h1 class="px-3 my-auto font-weight-bold">
          <%= title %>
        </h1>
      </div>
    <div class="d-flex flex-row justify-content-center">

      <a href="/explore" class="mx-5">Explore</a> <br><br>
      <a href="/profile" class="mx-5">Profile</a> <br><br>
    </div>
  </nav>
  <p>Welcome to <%= title %>
  </p>
    <form class="" action="/home" method="POST">
      <div class="input-group d-flex justify-content-center">

        <textarea type="text" name="textContent" value="" placeholder="Your story starts here" class="form-control"></textarea> 
        <div class="input-group-append">

          <button class="btn btn-dark py-1 px-4"
          type="submit" name="button">Plant</button>
        </div>
      </div>
    </form>


    <!-- for eeach javascript to render allposts in the following way, setting p as the name of the function  -->
    <% posts.forEach(function(p){ %>
      <div class="postDiv my-3">
        <h4>
          <button class="btn btn-outline-success mx-2">
            <img src="<%=imgsrc%>" alt="">
            <a href="<%= p.id %>">
              <%= p.textContent %>
                <!-- this is the content of the post variable we set in models/post.js -->
            </a>
          </button>
          
          <!-- Send a delete method as a post request then overide with delete inside of it with ?_method=DELETE -->
          <form action="<%= p.id %>?_method=DELETE" method="POST">
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1"
                data-bs-toggle="dropdown" aria-expanded="false">
                ...
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                <button class="dropdown-item text-danger" type="submit" name="button">Delete</button>
              </ul>
            </div>
          </form>
        </h4>


      </div>

    <% }); %>


  </body>
  <%- include('partials/footer') %>